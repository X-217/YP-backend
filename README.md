# YP-backend

Разработка backend для учебного проекта 'Mesto'.

------------

### Основные используемые технологии:
- node.js
- express
- mongoDB
------------

## Этапы разработки:

#### "Проектная работа 12" - выполнено, принято

 #### "Проектная работа 13" - выполнено, принято
  
 #### "Проектная работа 13" - ожидание код-ревью
 
------------

## Запуск проекта

Склонируйте репозиторий

https://github.com/X-217/YP-backend.git

Установите зависимости

`npm install`

Запустите сервер

`npm run start`

Для запуска с **hot reload**

`npm run dev`

------------

Для тестирования работы приложения используйте Postman: https://www.postman.com/downloads/

#####Создание нового пользователя

```html
POST http://localhost:3000/signup
```
Образец объекта для создания нового пользователя:
```json
{
"name" : "Тестовый пользователь",
"about" : "Информация о себе",
"avatar" :"https://icdn.lenta.ru/images/2020/05/27/00/20200527004126544/pic_2878afc7e709e103ad0db9b17361affa.jpg",
"email" : "qwerty@ya.ru",
"password" : "12345"
}
```
------------
#####Авторизация пользователя

```html
POST http://localhost:3000/signin
```

Образец объекта для авторизации пользователя:
```json
{
"email" : "qwerty@ya.ru",
"password" : "12345"
}
```

------------


#####Обновление профиля пользователя

( доступно только после авторизации )

```html
PATCH http://localhost:3000/users/me
```

Образец объекта для обновления профиля пользователя:
```json
{
"name" : "Измененнный пользователь",
"about" : "Новая информация"
}
```

------------

#####Обновление аватара пользователя

( доступно только после авторизации )

```html
PATCH http://localhost:3000/users/me/avatar
```

Образец объекта для обновления профиля пользователя:
```json
{
"avatar" :"https://icdn.lenta.ru/images/2020/06/01/18/20200601184316731/pic_216553662d40f3beceedb25edbdf75dc.png"
}
```

------------

#####Получить JSON объект пользователя по ID

( доступно только после авторизации )

```html
GET http://localhost:3000/users/:userId
```

------------

#####Получить JSON объект со всеми пользователями

( доступно только после авторизации )

```html
GET http://localhost:3000/users
```

------------

#####Создать карточку места

( доступно только после авторизации )

```html
POST http://localhost:3000/cards
```

Образец объекта для создания новой карточки:

```json
{
    "name": "Moscow",
    "link": "https://avatars.mds.yandex.net/get-pdb/1016500/f2c63605-9779-4894-afc2-8210dd16b250/s1200?webp=false"
}
```

------------

#####Поставить лайк карточке (по ID карточки)

( доступно только после авторизации )

```html
PUT http://localhost:3000/cards/:cardId/likes
```

------------
#####Убрать лайк с карточки (по ID карточки)

( доступно только после авторизации )

```html
DELETE http://localhost:3000/cards/:cardId/likes
```

------------
#####Удалить карточку (по ID карточки)

( доступно только после авторизации )

```html
DELETE http://localhost:3000/cards/:cardId
```

------------

#####Получить JSON объект со всеми карточками

( доступно только после авторизации )

```html
GET http://localhost:3000/cards
```

#### Чек лист проверки:

##### Операции с пользователями

1) Coздать нового пользователя / выполнено
2) Попытаться создать еще одного с такими же данными, контроль ошибок / выполнено, 400
3) Попытаться создать еще одного, с пустым полем name , контроль ошибок / выполнено, 400
4) Попытаться создать еще одного, с некорректным объектом (без поля password), контроль ошибок / выполнено, 400
5) Сoздать еще одного пользователя / выполнено
6) Получить JSON объект со всеми пользователями /выполнено
7) Выполнить авторизацию 1-го пользователя, контроль куки / выполнено
8) Разлогиниться (удалить куку) /выполнено
9) Попытаться выполнить авторизацию с неправильным email контроль куки и ошибок/ выполнено, отсутствует, 401
10) Выполнить авторизацию 2-го пользователя, контроль куки / выполнено
11) Получить объект пользователя по ID / выполнено
12) Попытаться получить объект пользователя по некорректному ID, контроль ошибок / выполнено, 400
13) Удалить пользователя (в MongoDB) /выполнено 
14) Попытаться получить объект удаленного пользователя, контроль ошибок / выполнено, 404
15) Создать еще одного пользователя / выполнено
16) Выполнить авторизацию под новым пользователем / выполнено
17) Обновить профиль пользователя / выполнено
18) Попытаться обновить профиль с некорректным объектом (без поля about), контроль ошибок / выполнено, 400
19) Попытаться обновить профиль с некорректным объектом (пустое поле name), контроль ошибок / выполнено, 400
20) Удалить авторизованного пользователя (в MongoDB) /выполнено 
21) Попытаться обновить профиль удаленного пользователя, контроль ошибок / выполнено, 404
22) Выполнить авторизацию под оставшимся пользователем / выполнено
23) Обновить аватар пользователя / выполнено
24) Попытаться обновить аватар с некорректным объектом (пустой объект), контроль ошибок / выполнено, 400
25) Попытаться обновить аватар с некорректным объектом (невалидное поле avatar), контроль ошибок / выполнено, 400
26) Удалить авторизованного пользователя (в MongoDB) /выполнено 
27) Попытаться обновить аватар удаленного пользователя, контроль ошибок / выполнено, 404

##### Операции с карточками

1) Создать карточку места, контроль owner / выполнено
2) Попытаться создать карточку места без поля name, контроль ошибок / выполнено, 400
3) Попытаться создать карточку места с некорректным link / выполнено, 400
4) Создать еще одну карточку места / выполнено
5) Разлогиниться (удалить куку) /выполнено
6) Выполнить авторизацию 1-го пользователя, контроль куки / выполнено
7) Создать еще две карточки места, контроль owner / выполнено
8) Поставить лайк своей карточке / выполнено
9) Поставить лайк той же карточке, контроль невозможности нескольких лайков от одного пользователя  / выполнено
10) Поставить лайк чужой карточке / выполнено
11) Попытаться поставить лайк несуществующей карточке (некорректный ID), контроль ошибки/ выполнено, 400
12) Дизлайк своей карточке / выполнено
13) Дизлайк той же карточке, контроль невозможности нескольких дизлайков от одного пользователя  / выполнено
14) Дизлайк чужой карточке / выполнено
15) Попытаться поставить дизлайк несуществующей карточке (некорректный ID), контроль ошибки/ выполнено, 400
16) Поставить лайк своей карточке / выполнено
17) Поставить лайк чужой карточке / выполнено
18) Удалить свою карточку / выполнено
19) Попытаться повторно удалить эту же карточку, контроль ошибок / выполнено, 404
20) Попытаться удалить карточку с некорректным ID, контроль ошибок / выполнено, 400
21) Попытаться удалить чужую карточку, контроль ошибок / выполнено, 403
22) Попытаться поставить лайк удаленной карточке, контроль ошибок / выполнено, 404
23) Попытаться поставить дизлайк удаленной карточке, контроль ошибок / выполнено, 404
24) Получить JSON объект со всеми карточками / выполнено

##### Finally
1) Сходить за пивом / выполнено
2) Дождаться результатов код-ревью
